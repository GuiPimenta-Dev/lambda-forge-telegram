{
  "url": "https://docs.lambda-forge.com/articles/deploying-external-library-as-layers/",
  "title": "Deploying External Library as Layers - Lambda Forge",
  "content": "\n\n\n\n\n\n\n\n\n\nDeploying External Library as Layers - Lambda Forge\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n          Skip to content\n        \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n            Lambda Forge\n          \n\n\n\n            \n              Deploying External Library as Layers\n            \n          \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n            Initializing search\n          \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        \n  \n    \n  \n  Home\n\n      \n\n\n\n          \n  \n  Docs\n\n        \n\n\n\n          \n  \n  Example Projects\n\n        \n\n\n\n          \n  \n  Articles\n\n        \n\n\n\n        \n  \n    \n  \n  License\n\n      \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Lambda Forge\n  \n\n\n\n\n    Home\n  \n\n\n\n\n\n\n    Docs\n  \n\n\n\n\n\n            Docs\n          \n\n\n\n\n    Introduction\n  \n\n\n\n\n\n    Getting Started\n  \n\n\n\n\n\n    Creating a Hello World\n  \n\n\n\n\n\n    Securing Endpoints\n  \n\n\n\n\n\n    Lambda Layers\n  \n\n\n\n\n\n    Multi-Stage Environments\n  \n\n\n\n\n\n    Custom CodePipeline Steps\n  \n\n\n\n\n\n    Docs Generation\n  \n\n\n\n\n\n    Pre-Commit Hooks\n  \n\n\n\n\n\n\n\n\n\n    Example Projects\n  \n\n\n\n\n\n            Example Projects\n          \n\n\n\n\n    Introduction\n  \n\n\n\n\n\n\n    Begginer\n  \n\n\n\n\n\n            Begginer\n          \n\n\n\n\n    Guess The Number\n  \n\n\n\n\n\n    URL Shortener\n  \n\n\n\n\n\n    Image to QR Code Converter\n  \n\n\n\n\n\n\n\n\n\n    Intermediate\n  \n\n\n\n\n\n            Intermediate\n          \n\n\n\n\n    JWT Authentication\n  \n\n\n\n\n\n    OAuth2 Authentication\n  \n\n\n\n\n\n    Real-Time Chat\n  \n\n\n\n\n\n    Web Scraper\n  \n\n\n\n\n\n\n\n\n\n    Advanced\n  \n\n\n\n\n\n            Advanced\n          \n\n\n\n\n    Data Processing Pipeline\n  \n\n\n\n\n\n    Stock Price Tracker\n  \n\n\n\n\n\n\n\n\n\n\n\n\n    Articles\n  \n\n\n\n\n\n            Articles\n          \n\n\n\n\n    Custom Domain Name\n  \n\n\n\n\n\n    Tests with Lambda Forge\n  \n\n\n\n\n\n\n    Deploying External Library as Layers\n  \n\n\n\n\n    Deploying External Library as Layers\n  \n\n\n\n\n      Table of contents\n    \n\n\n\n\n      Setting Up The Environment\n    \n\n\n\n\n\n      Preparing the Layer Package\n    \n\n\n\n\n\n      Creating and Using the Lambda Layer\n    \n\n\n\n\n\n\n\n\n    Creating S3 Buckets\n  \n\n\n\n\n\n    Locating the Base URL\n  \n\n\n\n\n\n    JSON Web Tokens\n  \n\n\n\n\n\n\n\n\n    License\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n      Table of contents\n    \n\n\n\n\n      Setting Up The Environment\n    \n\n\n\n\n\n      Preparing the Layer Package\n    \n\n\n\n\n\n      Creating and Using the Lambda Layer\n    \n\n\n\n\n\n\n\n\n\nDeploying an External Library to AWS Lambda as a Layer\nThis guide outlines the steps to deploy an external library, such as the qrcode library, to AWS Lambda as a Layer. AWS Lambda Layers serve as a repository for managing common code or data shared across multiple functions. By deploying the qrcode library as a Layer, the library can be utilized in various Lambda functions without needing to be included in each function's deployment package.\nAlthough the qrcode library is used as an example, this method applies universally to any library you wish to deploy in this manner.\nSetting Up The Environment\nmkdir packages\ncd packages\n\nInitialize a virtual environment within this directory and activate it:\npython3 -m venv venv\nsource venv/bin/activate\n\nCreate a directory named python within the current directory and navigate into it:\nmkdir python\ncd python\n\nIt is crucial to name this directory as python as it aligns with Lambda Layers' requirements.\nInstall the qrcode library directly into this directory:\npip install qrcode -t .\n\nThis command uses pip to install the library into the current python directory.\nAfter installation, you can attempt to list the directory contents. You should see the installed packages.\nPreparing the Layer Package\nRemove unnecessary files, specifically those with the .dist-info extension, to conserve space. These files are not needed for the Lambda Layer:\nrm -rf *dist-info\n\nReturn to the parent directory:\ncd ..\n\nZip the python directory, naming the zip file qr-code-lambda-package.zip:\nzip -r qr-code-lambda-package.zip python\n\nYou should now have the zip file in your current directory.\nCreate a s3 bucket and upload your zip file to it:\naws s3 cp qr-code-lambda-package.zip s3://your-s3-bucket-name/\n\nVerify the upload by checking the S3 bucket and ensuring the zip file is present. Note the object URL for later use.\nCreating and Using the Lambda Layer\nNavigate to the AWS Lambda console and select the Layers option.\nClick on Create layer and input the necessary configuration details. Choose the Upload a file from Amazon S3 option and paste the URL of the bucket containing the zip file you created earlier.\nFinalize by clicking \"Add\".\nThat's it! You've successfully deployed the qrcode library to AWS Lambda as a Layer.\n\n\n\n\n\n\n\n  Back to top\n\n\n\n\n\n\n\n      \u00a9 2024 Guilherme Alves Pimenta\n\n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
}